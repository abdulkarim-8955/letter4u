<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Mahnoor Aisha - Interactive Love Experience üíñ</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary: #ff3366;
      --secondary: #ff99cc;
      --gold: #ffd700;
      --shadow: 0 4px 15px rgba(255, 51, 102, 0.2);
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      touch-action: manipulation;
    }
    body {
      font-family: Arial, sans-serif;
      background: #ffe6f2;
      min-height: 100vh;
      overflow-x: hidden;
      text-align: center;
      padding-bottom: 40px;
    }
    /* Envelope Styles */
    .envelope-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      cursor: pointer;
      z-index: 1000;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .envelope {
      width: 250px;
      height: 180px;
      background: var(--primary);
      clip-path: polygon(0 0, 100% 0, 100% 85%, 50% 100%, 0 85%);
      position: relative;
      border-radius: 10px;
    }
    .envelope::after {
      content: 'üíå Tap to Open üíå';
      position: absolute;
      bottom: -40px;
      width: 100%;
      text-align: center;
      color: var(--primary);
      font-weight: bold;
      font-size: 1.1rem;
    }
    /* Letter Container */
    .letter-container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 30px;
      background: white;
      border-radius: 15px;
      box-shadow: var(--shadow);
      display: none;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }
    .letter-visible {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }
    h1 {
      font-family: 'Great Vibes', cursive;
      color: var(--primary);
      margin-bottom: 30px;
      font-size: 3rem;
    }
    /* Games Grid & Cards */
    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      padding: 20px;
    }
    .game-card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease;
    }
    .game-card:hover {
      transform: translateY(-5px);
    }
    /* Love Calculator Inputs */
    .game-card input[type="text"] {
      width: 80%;
      padding: 8px;
      margin: 5px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .game-card button {
      padding: 8px 15px;
      margin-top: 8px;
      background: var(--primary);
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .game-card button:hover {
      background: var(--secondary);
    }
    /* Memory Match Styles */
    .memory-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .memory-card {
      aspect-ratio: 1;
      background: var(--primary);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }
    .memory-card.flipped {
      transform: rotateY(180deg);
    }
    .memory-card .front, .memory-card .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .memory-card .back {
      transform: rotateY(180deg);
    }
    /* Heart Slider Styles */
    #sliderTrack {
      height: 50px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 25px;
      position: relative;
      margin-bottom: 10px;
    }
    #sliderThumb {
      width: 50px;
      height: 50px;
      background: white;
      border-radius: 50%;
      position: absolute;
      left: 0;
    }
    /* Tic Tac Toe Styles */
    #ticTacToe {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 5px;
      margin: 10px auto;
      max-width: 320px;
    }
    .tic-cell {
      background: #ffe6f2;
      border: 2px solid var(--primary);
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    /* Drawing Board Styles */
    #drawCanvas {
      border: 2px solid var(--primary);
      border-radius: 10px;
      touch-action: none;
    }
    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .envelope {
        width: 200px;
        height: 140px;
      }
      h1 {
        font-size: 2.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- Envelope -->
  <div class="envelope-container" onclick="openEnvelope()">
    <div class="envelope"></div>
  </div>

  <!-- Letter Container with Multiple Mini-Games -->
  <div class="letter-container" id="letterContent">
    <h1>For My Beloved Mahnoor Aisha üíò</h1>
    <div class="games-grid">
      <!-- Love Calculator -->
      <div class="game-card">
        <h3>Love Calculator üíë</h3>
        <input type="text" id="name1" placeholder="Your Name">
        <input type="text" id="name2" value="Mahnoor Aisha" readonly>
        <button onclick="calculateLove()">Calculate</button>
        <div id="loveResult"></div>
      </div>

      <!-- Memory Match Game -->
      <div class="game-card">
        <h3>Memory Match üß†</h3>
        <div class="memory-grid" id="memoryGrid"></div>
      </div>

      <!-- Heart Slider Game -->
      <div class="game-card">
        <h3>Heart Slider üíñ</h3>
        <div id="sliderTrack">
          <div id="sliderThumb"></div>
        </div>
        <button onclick="collectHearts()">Collect Hearts</button>
        <div id="heartCount">Hearts: 0</div>
      </div>

      <!-- Secret Message Encoder -->
      <div class="game-card">
        <h3>Secret Message Encoder üîê</h3>
        <input type="text" id="secretMessage" placeholder="Type your message">
        <button onclick="encodeMessage()">Encode Love</button>
        <div id="encodedMessage"></div>
      </div>

      <!-- Love Quiz -->
      <div class="game-card">
        <h3>Love Quiz ‚ùì</h3>
        <div id="quizContent"></div>
        <button onclick="submitQuiz()">Submit Quiz</button>
        <div id="quizResult"></div>
      </div>

      <!-- Romantic Tic Tac Toe -->
      <div class="game-card">
        <h3>Romantic Tic Tac Toe ‚ù§Ô∏è</h3>
        <div id="ticTacToe"></div>
        <button onclick="resetTicTacToe()">Reset Game</button>
        <div id="ticTacToeResult"></div>
      </div>

      <!-- Drawing Board -->
      <div class="game-card">
        <h3>Draw Your Love üé®</h3>
        <canvas id="drawCanvas" width="300" height="200"></canvas>
        <button onclick="clearCanvas()">Clear</button>
      </div>
    </div>
  </div>

  <script>
    /* ---------- Envelope Logic ---------- */
    let envelopeOpened = false;
    function openEnvelope() {
      if (envelopeOpened) return;
      envelopeOpened = true;
      const envelope = document.querySelector('.envelope-container');
      envelope.style.opacity = '0';
      envelope.style.transform = 'translate(-50%, -120vh)';
      setTimeout(() => {
        document.getElementById('letterContent').classList.add('letter-visible');
        initializeGames();
      }, 500);
    }

    /* ---------- Initialize All Games ---------- */
    function initializeGames() {
      initializeMemoryGame();
      setupSlider();
      setupDrawingBoard();
      initializeQuiz();
      initializeTicTacToe();
    }

    /* ---------- Love Calculator ---------- */
    function calculateLove() {
      const name1 = document.getElementById('name1').value.trim().toLowerCase();
      const name2 = document.getElementById('name2').value.trim().toLowerCase();
      let percentage = ((name1.length + name2.length) * 3.14) % 100;
      percentage = Math.max(85, Math.min(percentage, 99));
      document.getElementById('loveResult').innerHTML = `
        üíñ ${percentage}% Match üíñ
        <div style="height:10px; background:#ffe6f2; margin-top:10px; border-radius:5px;">
          <div style="width:${percentage}%; height:100%; background:var(--primary); border-radius:5px;"></div>
        </div>
      `;
    }

    /* ---------- Memory Match Game ---------- */
    const memoryPairs = ['‚ù§Ô∏è', 'üéÅ', 'üå∏', 'üíç'];
    let flippedCards = [];
    let lockBoard = false;
    function initializeMemoryGame() {
      const grid = document.getElementById('memoryGrid');
      grid.innerHTML = '';
      let cardsArray = [...memoryPairs, ...memoryPairs];
      cardsArray.sort(() => Math.random() - 0.5);
      cardsArray.forEach(emoji => {
        const card = document.createElement('div');
        card.className = 'memory-card';
        card.innerHTML = `<div class="front">?</div><div class="back">${emoji}</div>`;
        card.addEventListener('click', () => flipCard(card));
        grid.appendChild(card);
      });
    }
    function flipCard(card) {
      if (lockBoard || card === flippedCards[0]) return;
      card.classList.add('flipped');
      flippedCards.push(card);
      if (flippedCards.length === 2) checkMemoryMatch();
    }
    function checkMemoryMatch() {
      const [card1, card2] = flippedCards;
      const isMatch = card1.querySelector('.back').textContent === card2.querySelector('.back').textContent;
      lockBoard = true;
      if (isMatch) {
        flippedCards = [];
        lockBoard = false;
      } else {
        setTimeout(() => {
          card1.classList.remove('flipped');
          card2.classList.remove('flipped');
          flippedCards = [];
          lockBoard = false;
        }, 1000);
      }
    }

    /* ---------- Heart Slider Game ---------- */
    let isDragging = false;
    let startX = 0;
    let heartsCollected = 0;
    function setupSlider() {
      const thumb = document.getElementById('sliderThumb');
      const track = document.getElementById('sliderTrack');
      thumb.addEventListener('mousedown', startDrag);
      thumb.addEventListener('touchstart', startDrag);
      document.addEventListener('mousemove', drag);
      document.addEventListener('touchmove', drag);
      document.addEventListener('mouseup', endDrag);
      document.addEventListener('touchend', endDrag);
    }
    function startDrag(e) {
      isDragging = true;
      const rect = document.getElementById('sliderTrack').getBoundingClientRect();
      startX = (e.clientX || e.touches[0].clientX) - rect.left;
    }
    function drag(e) {
      if (!isDragging) return;
      e.preventDefault();
      const track = document.getElementById('sliderTrack');
      const thumb = document.getElementById('sliderThumb');
      const rect = track.getBoundingClientRect();
      let newX = (e.clientX || e.touches[0].clientX) - rect.left - startX;
      newX = Math.max(0, Math.min(newX, track.offsetWidth - thumb.offsetWidth));
      thumb.style.left = newX + 'px';
    }
    function endDrag() {
      isDragging = false;
    }
    function collectHearts() {
      const thumb = document.getElementById('sliderThumb');
      const position = parseInt(thumb.style.left) || 0;
      heartsCollected += Math.floor(position / 10);
      document.getElementById('heartCount').textContent = 'Hearts: ' + heartsCollected;
      thumb.style.left = '0px';
    }

    /* ---------- Secret Message Encoder ---------- */
    function encodeMessage() {
      const msg = document.getElementById('secretMessage').value;
      // Simple Caesar cipher with shift 3 for demonstration
      let encoded = '';
      for (let i = 0; i < msg.length; i++) {
        let ch = msg.charCodeAt(i);
        encoded += String.fromCharCode(ch + 3);
      }
      document.getElementById('encodedMessage').textContent = encoded;
    }

    /* ---------- Love Quiz ---------- */
    const quizData = [
      {
        question: "What is the color of love?",
        options: ["Red", "Blue", "Green", "Yellow"],
        answer: "Red"
      },
      {
        question: "What symbol represents love?",
        options: ["‚ù§Ô∏è", "‚≠ê", "üåü", "üíî"],
        answer: "‚ù§Ô∏è"
      }
    ];
    function initializeQuiz() {
      const quizDiv = document.getElementById('quizContent');
      quizDiv.innerHTML = '';
      quizData.forEach((q, index) => {
        let qDiv = document.createElement('div');
        qDiv.style.marginBottom = '10px';
        qDiv.innerHTML = `<p>${q.question}</p>`;
        q.options.forEach(option => {
          qDiv.innerHTML += `<label style="margin-right:10px;">
                                <input type="radio" name="q${index}" value="${option}"> ${option}
                              </label>`;
        });
        quizDiv.appendChild(qDiv);
      });
    }
    function submitQuiz() {
      let score = 0;
      quizData.forEach((q, index) => {
        let selected = document.querySelector('input[name="q' + index + '"]:checked');
        if (selected && selected.value === q.answer) {
          score++;
        }
      });
      document.getElementById('quizResult').textContent = "Your Score: " + score + " / " + quizData.length;
    }

    /* ---------- Romantic Tic Tac Toe ---------- */
    let ticTacToeBoard = Array(9).fill("");
    let currentPlayer = "‚ù§Ô∏è";
    let gameActive = true;
    function initializeTicTacToe() {
      const boardDiv = document.getElementById('ticTacToe');
      boardDiv.innerHTML = '';
      ticTacToeBoard = Array(9).fill("");
      currentPlayer = "‚ù§Ô∏è";
      gameActive = true;
      for (let i = 0; i < 9; i++) {
        let cell = document.createElement('div');
        cell.className = "tic-cell";
        cell.dataset.index = i;
        cell.addEventListener('click', ticTacToeMove);
        boardDiv.appendChild(cell);
      }
    }
    function ticTacToeMove(e) {
      const index = e.target.dataset.index;
      if (ticTacToeBoard[index] !== "" || !gameActive) return;
      ticTacToeBoard[index] = currentPlayer;
      e.target.textContent = currentPlayer;
      if (checkTicTacToeWinner()) {
        document.getElementById('ticTacToeResult').textContent = currentPlayer + " wins!";
        gameActive = false;
        return;
      }
      if (!ticTacToeBoard.includes("")) {
        document.getElementById('ticTacToeResult').textContent = "It's a draw!";
        gameActive = false;
        return;
      }
      currentPlayer = (currentPlayer === "‚ù§Ô∏è") ? "üíç" : "‚ù§Ô∏è";
    }
    function checkTicTacToeWinner() {
      const winConditions = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6]
      ];
      return winConditions.some(condition => {
        return condition.every(index => ticTacToeBoard[index] === currentPlayer);
      });
    }
    function resetTicTacToe() {
      document.getElementById('ticTacToeResult').textContent = "";
      initializeTicTacToe();
    }

    /* ---------- Drawing Board ---------- */
    let isDrawing = false;
    let canvas, ctx;
    function setupDrawingBoard() {
      canvas = document.getElementById('drawCanvas');
      ctx = canvas.getContext('2d');
      ctx.lineWidth = 3;
      ctx.strokeStyle = getComputedStyle(document.documentElement)
                           .getPropertyValue('--primary');
      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('touchstart', startDrawing);
      canvas.addEventListener('touchmove', draw);
      canvas.addEventListener('touchend', stopDrawing);
    }
    function startDrawing(e) {
      isDrawing = true;
      const rect = canvas.getBoundingClientRect();
      ctx.beginPath();
      ctx.moveTo(
        (e.clientX || e.touches[0].clientX) - rect.left,
        (e.clientY || e.touches[0].clientY) - rect.top
      );
    }
    function draw(e) {
      if (!isDrawing) return;
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      ctx.lineTo(
        (e.clientX || e.touches[0].clientX) - rect.left,
        (e.clientY || e.touches[0].clientY) - rect.top
      );
      ctx.stroke();
    }
    function stopDrawing() {
      isDrawing = false;
    }
    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
  </script>
</body>
</html>
