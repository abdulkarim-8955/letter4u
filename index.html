<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Mahnoor Aisha - Magical Love Experience üíñ</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #ff3366;
      --secondary: #ff99cc;
      --bg-gradient: linear-gradient(135deg, #ffe6f2, #fff0f5);
      --card-gradient: linear-gradient(135deg, #ffffff, #ffeef8);
      --shadow: 0 4px 15px rgba(255, 51, 102, 0.2);
      --text-color: #333;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      touch-action: manipulation;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-gradient);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      padding-bottom: 40px;
    }
    /* Magical confetti canvas overlay */
    #confettiCanvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 2000;
    }
    /* Envelope Styles */
    .envelope-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      cursor: pointer;
      z-index: 1000;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .envelope {
      width: 280px;
      height: 200px;
      background: var(--primary);
      clip-path: polygon(0 0, 100% 0, 100% 80%, 50% 100%, 0 80%);
      border-radius: 10px;
      position: relative;
      box-shadow: var(--shadow);
      animation: pulse 2s infinite;
    }
    .envelope::after {
      content: 'üíå Tap to Open üíå';
      position: absolute;
      bottom: -50px;
      width: 100%;
      text-align: center;
      color: #fff;
      font-weight: 600;
      font-size: 1.2rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    /* Letter Container */
    .letter-container {
      max-width: 1200px;
      width: 95%;
      margin: 80px auto;
      padding: 40px 30px;
      background: var(--card-gradient);
      border-radius: 15px;
      box-shadow: var(--shadow);
      display: none;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }
    .letter-visible {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }
    h1 {
      font-family: 'Great Vibes', cursive;
      color: var(--primary);
      margin-bottom: 30px;
      font-size: 3.5rem;
      text-shadow: 0 3px 5px rgba(0,0,0,0.1);
      text-align: center;
    }
    /* Games Grid & Cards */
    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      padding: 20px;
    }
    .game-card {
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .game-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 6px 20px rgba(255, 51, 102, 0.25);
    }
    .game-card h3 {
      margin-bottom: 15px;
      color: var(--primary);
    }
    .game-card input[type="text"],
    .game-card button {
      font-family: 'Poppins', sans-serif;
    }
    .game-card input[type="text"] {
      width: 90%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
      outline: none;
      transition: border-color 0.3s ease;
    }
    .game-card input[type="text"]:focus {
      border-color: var(--primary);
    }
    .game-card button {
      padding: 10px 18px;
      margin-top: 10px;
      background: var(--primary);
      border: none;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .game-card button:hover {
      background: var(--secondary);
    }
    /* Memory Match Styles */
    .memory-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .memory-card {
      aspect-ratio: 1;
      background: var(--primary);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      cursor: pointer;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }
    .memory-card.flipped {
      transform: rotateY(180deg);
    }
    .memory-card .front, .memory-card .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
    }
    .memory-card .front {
      background: var(--primary);
      color: #fff;
      font-weight: 600;
    }
    .memory-card .back {
      transform: rotateY(180deg);
      background: #fff;
      font-size: 2.2rem;
    }
    /* Heart Slider Styles */
    #sliderTrack {
      height: 50px;
      background: rgba(255, 255, 255, 0.4);
      border-radius: 25px;
      position: relative;
      margin-bottom: 10px;
    }
    #sliderThumb {
      width: 50px;
      height: 50px;
      background: #fff;
      border-radius: 50%;
      position: absolute;
      left: 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    /* Tic Tac Toe Styles */
    #ticTacToe {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 5px;
      margin: 10px auto;
      max-width: 320px;
      width: 100%;
    }
    .tic-cell {
      background: #ffe6f2;
      border: 2px solid var(--primary);
      font-size: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.3s;
      padding: 20px;
      user-select: none;
    }
    .tic-cell:hover {
      background: var(--secondary);
    }
    /* Drawing Board Styles */
    #drawCanvas {
      border: 2px solid var(--primary);
      border-radius: 10px;
      touch-action: none;
      background: #fff;
      width: 100%;
      height: auto;
    }
    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .envelope {
        width: 220px;
        height: 160px;
      }
      .envelope::after {
        font-size: 1rem;
      }
      h1 {
        font-size: 2.8rem;
      }
      .tic-cell {
        font-size: 2rem;
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <!-- Confetti Canvas Overlay -->
  <canvas id="confettiCanvas"></canvas>

  <!-- Envelope -->
  <div class="envelope-container" onclick="openEnvelope()">
    <div class="envelope"></div>
  </div>

  <!-- Letter Container with Multiple Mini-Games -->
  <div class="letter-container" id="letterContent">
    <h1>For My Beloved Mahnoor Aisha üíò</h1>
    <div class="games-grid">
      <!-- Love Calculator -->
      <div class="game-card">
        <h3>Love Calculator üíë</h3>
        <input type="text" id="name1" placeholder="Your Name">
        <input type="text" id="name2" value="Mahnoor Aisha" readonly>
        <button onclick="calculateLove()">Calculate</button>
        <div id="loveResult"></div>
      </div>

      <!-- Memory Match Game -->
      <div class="game-card">
        <h3>Memory Match üß†</h3>
        <div class="memory-grid" id="memoryGrid"></div>
      </div>

      <!-- Heart Slider Game -->
      <div class="game-card">
        <h3>Heart Slider üíñ</h3>
        <div id="sliderTrack">
          <div id="sliderThumb"></div>
        </div>
        <button onclick="collectHearts()">Collect Hearts</button>
        <div id="heartCount">Hearts: 0</div>
      </div>

      <!-- Secret Message Encoder -->
      <div class="game-card">
        <h3>Secret Message Encoder üîê</h3>
        <input type="text" id="secretMessage" placeholder="Type your message">
        <button onclick="encodeMessage()">Encode Love</button>
        <div id="encodedMessage"></div>
      </div>

      <!-- Love Quiz -->
      <div class="game-card">
        <h3>Love Quiz ‚ùì</h3>
        <div id="quizContent"></div>
        <button onclick="submitQuiz()">Submit Quiz</button>
        <div id="quizResult"></div>
      </div>

      <!-- Romantic Tic Tac Toe -->
      <div class="game-card">
        <h3>Romantic Tic Tac Toe ‚ù§Ô∏è</h3>
        <div id="ticTacToe"></div>
        <button onclick="resetTicTacToe()">Reset Game</button>
        <div id="ticTacToeResult"></div>
      </div>

      <!-- Drawing Board -->
      <div class="game-card">
        <h3>Draw Your Love üé®</h3>
        <!-- Ensure canvas has a fixed aspect ratio -->
        <canvas id="drawCanvas" width="300" height="200"></canvas>
        <button onclick="clearCanvas()">Clear</button>
      </div>

      <!-- Love Quote Generator -->
      <div class="game-card">
        <h3>Love Quote Generator üí¨</h3>
        <button onclick="generateLoveQuote()">Generate Quote</button>
        <div id="loveQuote"></div>
      </div>

      <!-- Love Riddle -->
      <div class="game-card">
        <h3>Love Riddle üïµÔ∏è‚Äç‚ôÇÔ∏è</h3>
        <p id="riddleQuestion"></p>
        <input type="text" id="riddleAnswer" placeholder="Your Answer">
        <button onclick="submitRiddle()">Submit Answer</button>
        <div id="riddleResult"></div>
      </div>
    </div>
  </div>

  <script>
    /* ---------- Envelope Logic ---------- */
    let envelopeOpened = false;
    function openEnvelope() {
      if (envelopeOpened) return;
      envelopeOpened = true;
      const envelope = document.querySelector('.envelope-container');
      envelope.style.opacity = '0';
      envelope.style.transform = 'translate(-50%, -150vh)';
      setTimeout(() => {
        document.getElementById('letterContent').classList.add('letter-visible');
        initializeGames();
      }, 500);
    }

    /* ---------- Initialize All Games ---------- */
    function initializeGames() {
      initializeMemoryGame();
      setupSlider();
      setupDrawingBoard();
      initializeQuiz();
      initializeTicTacToe();
      initializeRiddle();
    }

    /* ---------- Love Calculator ---------- */
    function calculateLove() {
      const name1 = document.getElementById('name1').value.trim().toLowerCase();
      const name2 = document.getElementById('name2').value.trim().toLowerCase();
      let percentage = ((name1.length + name2.length) * 3.14) % 100;
      percentage = Math.max(85, Math.min(percentage, 99));
      document.getElementById('loveResult').innerHTML = `
        <strong>üíñ ${percentage}% Match üíñ</strong>
        <div style="height:10px; background:#ffe6f2; margin-top:10px; border-radius:5px;">
          <div style="width:${percentage}%; height:100%; background:var(--primary); border-radius:5px;"></div>
        </div>
      `;
    }

    /* ---------- Memory Match Game ---------- */
    const memoryPairs = ['‚ù§Ô∏è', 'üéÅ', 'üå∏', 'üíç'];
    let flippedCards = [];
    let lockBoard = false;
    function initializeMemoryGame() {
      const grid = document.getElementById('memoryGrid');
      grid.innerHTML = '';
      let cardsArray = [...memoryPairs, ...memoryPairs];
      cardsArray.sort(() => Math.random() - 0.5);
      cardsArray.forEach(emoji => {
        const card = document.createElement('div');
        card.className = 'memory-card';
        card.innerHTML = `<div class="front">?</div><div class="back">${emoji}</div>`;
        card.addEventListener('click', () => flipCard(card));
        grid.appendChild(card);
      });
    }
    function flipCard(card) {
      if (lockBoard || card === flippedCards[0]) return;
      card.classList.add('flipped');
      flippedCards.push(card);
      if (flippedCards.length === 2) checkMemoryMatch();
    }
    function checkMemoryMatch() {
      const [card1, card2] = flippedCards;
      const isMatch = card1.querySelector('.back').textContent === card2.querySelector('.back').textContent;
      lockBoard = true;
      if (isMatch) {
        flippedCards = [];
        lockBoard = false;
      } else {
        setTimeout(() => {
          card1.classList.remove('flipped');
          card2.classList.remove('flipped');
          flippedCards = [];
          lockBoard = false;
        }, 1000);
      }
    }

    /* ---------- Heart Slider Game ---------- */
    let isDragging = false;
    let startX = 0;
    let heartsCollected = 0;
    function setupSlider() {
      const thumb = document.getElementById('sliderThumb');
      const track = document.getElementById('sliderTrack');
      thumb.addEventListener('mousedown', startDrag);
      thumb.addEventListener('touchstart', startDrag);
      document.addEventListener('mousemove', drag);
      document.addEventListener('touchmove', drag);
      document.addEventListener('mouseup', endDrag);
      document.addEventListener('touchend', endDrag);
    }
    function startDrag(e) {
      isDragging = true;
      const rect = document.getElementById('sliderTrack').getBoundingClientRect();
      startX = (e.clientX || (e.touches && e.touches[0].clientX)) - rect.left;
    }
    function drag(e) {
      if (!isDragging) return;
      e.preventDefault();
      const track = document.getElementById('sliderTrack');
      const thumb = document.getElementById('sliderThumb');
      const rect = track.getBoundingClientRect();
      let newX = (e.clientX || (e.touches && e.touches[0].clientX)) - rect.left - startX;
      newX = Math.max(0, Math.min(newX, track.offsetWidth - thumb.offsetWidth));
      thumb.style.left = newX + 'px';
    }
    function endDrag() {
      isDragging = false;
    }
    function collectHearts() {
      const thumb = document.getElementById('sliderThumb');
      const position = parseInt(thumb.style.left) || 0;
      heartsCollected += Math.floor(position / 10);
      document.getElementById('heartCount').textContent = 'Hearts: ' + heartsCollected;
      thumb.style.left = '0px';
    }

    /* ---------- Secret Message Encoder ---------- */
    function encodeMessage() {
      const msg = document.getElementById('secretMessage').value;
      let encoded = '';
      for (let i = 0; i < msg.length; i++) {
        let ch = msg.charCodeAt(i);
        encoded += String.fromCharCode(ch + 3);
      }
      document.getElementById('encodedMessage').textContent = encoded;
    }

    /* ---------- Love Quiz ---------- */
    const quizData = [
      {
        question: "What is the color of love?",
        options: ["Red", "Blue", "Green", "Yellow"],
        answer: "Red"
      },
      {
        question: "Which symbol represents love?",
        options: ["‚ù§Ô∏è", "‚≠ê", "üåü", "üíî"],
        answer: "‚ù§Ô∏è"
      }
    ];
    function initializeQuiz() {
      const quizDiv = document.getElementById('quizContent');
      quizDiv.innerHTML = '';
      quizData.forEach((q, index) => {
        let qDiv = document.createElement('div');
        qDiv.style.marginBottom = '10px';
        qDiv.innerHTML = `<p>${q.question}</p>`;
        q.options.forEach(option => {
          qDiv.innerHTML += `<label style="margin-right:10px; font-size:0.95rem;">
                                <input type="radio" name="q${index}" value="${option}"> ${option}
                              </label>`;
        });
        quizDiv.appendChild(qDiv);
      });
    }
    function submitQuiz() {
      let score = 0;
      quizData.forEach((q, index) => {
        let selected = document.querySelector('input[name="q' + index + '"]:checked');
        if (selected && selected.value === q.answer) {
          score++;
        }
      });
      document.getElementById('quizResult').textContent = "Your Score: " + score + " / " + quizData.length;
    }

    /* ---------- Romantic Tic Tac Toe ---------- */
    let ticTacToeBoard = Array(9).fill("");
    let currentPlayer = "‚ù§Ô∏è";
    let gameActive = true;
    function initializeTicTacToe() {
      const boardDiv = document.getElementById('ticTacToe');
      boardDiv.innerHTML = '';
      ticTacToeBoard = Array(9).fill("");
      currentPlayer = "‚ù§Ô∏è";
      gameActive = true;
      for (let i = 0; i < 9; i++) {
        let cell = document.createElement('div');
        cell.className = "tic-cell";
        cell.dataset.index = i;
        cell.addEventListener('click', ticTacToeMove);
        boardDiv.appendChild(cell);
      }
      document.getElementById('ticTacToeResult').textContent = "";
    }
    function ticTacToeMove(e) {
      const index = e.target.dataset.index;
      if (ticTacToeBoard[index] !== "" || !gameActive) return;
      ticTacToeBoard[index] = currentPlayer;
      e.target.textContent = currentPlayer;
      if (checkTicTacToeWinner()) {
        document.getElementById('ticTacToeResult').textContent = currentPlayer + " wins!";
        gameActive = false;
        triggerConfetti(); // magical confetti effect on win
        return;
      }
      if (!ticTacToeBoard.includes("")) {
        document.getElementById('ticTacToeResult').textContent = "It's a draw!";
        gameActive = false;
        return;
      }
      currentPlayer = (currentPlayer === "‚ù§Ô∏è") ? "üíç" : "‚ù§Ô∏è";
    }
    function checkTicTacToeWinner() {
      const winConditions = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6]
      ];
      return winConditions.some(condition => {
        return condition.every(index => ticTacToeBoard[index] === currentPlayer);
      });
    }
    function resetTicTacToe() {
      initializeTicTacToe();
    }

    /* ---------- Drawing Board ---------- */
    let isDrawing = false;
    let canvas, ctx;
    function setupDrawingBoard() {
      canvas = document.getElementById('drawCanvas');
      if (!canvas) return;
      ctx = canvas.getContext('2d');
      ctx.lineWidth = 3;
      ctx.strokeStyle = getComputedStyle(document.documentElement)
                           .getPropertyValue('--primary');
      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('touchstart', startDrawing);
      canvas.addEventListener('touchmove', draw);
      canvas.addEventListener('touchend', stopDrawing);
      canvas.addEventListener('touchcancel', stopDrawing);
    }
    function startDrawing(e) {
      isDrawing = true;
      const rect = canvas.getBoundingClientRect();
      let clientX = e.clientX, clientY = e.clientY;
      if(e.touches && e.touches.length > 0) {
        clientX = e.touches[0].clientX;
        clientY = e.touches[0].clientY;
      }
      ctx.beginPath();
      ctx.moveTo(clientX - rect.left, clientY - rect.top);
    }
    function draw(e) {
      if (!isDrawing) return;
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      let clientX = e.clientX, clientY = e.clientY;
      if(e.touches && e.touches.length > 0) {
        clientX = e.touches[0].clientX;
        clientY = e.touches[0].clientY;
      }
      ctx.lineTo(clientX - rect.left, clientY - rect.top);
      ctx.stroke();
    }
    function stopDrawing() {
      isDrawing = false;
    }
    function clearCanvas() {
      if(ctx && canvas) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
    }

    /* ---------- Love Quote Generator ---------- */
    function generateLoveQuote() {
      const quotes = [
        "You are the sun in my day, the waves in my ocean, the wind in my sky.",
        "Every moment with you is a beautiful dream come true.",
        "My heart beats only for you, my love, my everything.",
        "You light up my world in ways you cannot imagine."
      ];
      document.getElementById('loveQuote').textContent =
        quotes[Math.floor(Math.random() * quotes.length)];
    }

    /* ---------- Love Riddle ---------- */
    const riddleData = {
      question: "um...my question is...will you be my girl for ever ?",
      answer: "yes"
    };
    function initializeRiddle() {
      document.getElementById('riddleQuestion').textContent = riddleData.question;
    }
    function submitRiddle() {
      const userAnswer = document.getElementById('riddleAnswer').value.trim().toLowerCase();
      const correctAnswer = riddleData.answer.trim().toLowerCase();
      if(userAnswer === correctAnswer) {
        document.getElementById('riddleResult').textContent = "Correct! You are amazing!";
      } else {
        document.getElementById('riddleResult').textContent = "Oops, try again!";
      }
    }

    /* ---------- Confetti Effect (Magical UI) ---------- */
    const confettiCanvas = document.getElementById('confettiCanvas');
    const confettiCtx = confettiCanvas.getContext('2d');
    let confettiParticles = [];
    function resizeConfettiCanvas() {
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeConfettiCanvas);
    resizeConfettiCanvas();
    function triggerConfetti() {
      confettiParticles = [];
      const colors = ['#ff3366', '#ff99cc', '#ffd700', '#ff66cc', '#ff6699'];
      for (let i = 0; i < 150; i++) {
        confettiParticles.push({
          x: Math.random() * confettiCanvas.width,
          y: Math.random() * confettiCanvas.height - confettiCanvas.height,
          r: Math.random() * 6 + 2,
          d: Math.random() * 150 + 10,
          color: colors[Math.floor(Math.random() * colors.length)],
          tilt: Math.random() * 10 - 10,
          tiltAngleIncremental: Math.random() * 0.07 + 0.05,
          tiltAngle: 0
        });
      }
      animateConfetti();
      setTimeout(() => {
        confettiParticles = [];
        confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
      }, 4000);
    }
    function animateConfetti() {
      confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
      confettiParticles.forEach(p => {
        p.tiltAngle += p.tiltAngleIncremental;
        p.y += (Math.cos(p.d) + 3 + p.r / 2) / 2;
        p.x += Math.sin(p.d);
        p.tilt = Math.sin(p.tiltAngle) * 15;
        confettiCtx.beginPath();
        confettiCtx.lineWidth = p.r;
        confettiCtx.strokeStyle = p.color;
        confettiCtx.moveTo(p.x + p.tilt + p.r / 3, p.y);
        confettiCtx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r / 5);
        confettiCtx.stroke();
      });
      if (confettiParticles.length) {
        requestAnimationFrame(animateConfetti);
      }
    }
  </script>
</body>
</html>
